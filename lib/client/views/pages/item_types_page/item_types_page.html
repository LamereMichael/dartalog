<auth-status (authorizedChanged)="authorizationChanged($event)" require="admin" [showMessage]="true"></auth-status>

<div *ngIf="userAuthorized">
    <div *ngIf="noItemsFound&&!processing" class="no-items">No Item Types Found</div>
    <material-list>
        <material-list-item *ngFor="let i of items" (trigger)="selectItem(i)">
            {{i.name}}
        </material-list-item>
    </material-list>

    <modal [visible]="editVisible">
        <material-dialog class="basic-dialog">
            <h3 *ngIf="isNewItem" header>Create</h3>
            <h3 *ngIf="!isNewItem" header>Edit</h3>
            <form (ngSubmit)="onSubmit()" #editForm="ngForm">
            <material-input [(ngModel)]="model.readableId" ngControl="readableId" floatingLabel required autoFocus
                            label="ID"></material-input>
            <br/>
                <material-input [(ngModel)]="model.name" ngControl="name" floatingLabel required
                                label="Name"></material-input>
                <br/>
                Fields
                <select [(ngModel)]="selectedField" ngControl="fieldUuids">
                    <option></option>
                    <option *ngFor="let f of fields" [ngValue]="f">
                        {{f.name}}
                    </option>
                </select>
                <material-button (trigger)="addField()" raised >Add</material-button>
                <ol>
                <reorder-list  (reorder)="onReorder($event)">
                    <material-list-item *ngFor="let f of model.fieldUuids" (trigger)="removeField(f)" reorderItem>
                        {{f}}
                    </material-list-item>
                </reorder-list>
                </ol>


            <span *ngIf="hasErrorMessage" class="error_output">
                    <glyph icon="error_outline"></glyph>
                    {{errorMessage}}
                </span>
            <input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/>
            </form>
            <div footer style="text-align: right">
                <material-yes-no-buttons yesHighlighted
                                         yesText="Save" (yes)="onSubmit()"
                                         noText="Cancel" (no)="editVisible = false"
                                         [pending]="processing" [yesDisabled]="!editForm.valid">
                </material-yes-no-buttons>
            </div>
        </material-dialog>
    </modal>
</div>